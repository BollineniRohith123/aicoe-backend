<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UC-005: Subscribe to Premium Plan | AICOE</title>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root {
            --primary: #007AFF;
            --primary-dark: #0051D5;
            --secondary: #5856D6;
            --success: #34C759;
            --warning: #FF9500;
            --danger: #FF3B30;
            --dark: #1C1C1E;
            --gray-100: #F2F2F7;
            --gray-200: #E5E5EA;
            --gray-300: #D1D1D6;
            --gray-400: #C7C7CC;
            --gray-500: #8E8E93;
            --gray-600: #636366;
            --gray-700: #48484A;
            --gray-800: #363638;
            --gray-900: #2C2C2E;
            --white: #FFFFFF;
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.06);
            --shadow-md: 0 4px 6px rgba(0,0,0,0.1), 0 2px 4px rgba(0,0,0,0.06);
            --shadow-lg: 0 10px 25px rgba(0,0,0,0.1), 0 6px 10px rgba(0,0,0,0.08);
            --shadow-xl: 0 20px 40px rgba(0,0,0,0.15);
            --radius: 12px;
            --radius-sm: 8px;
            --radius-lg: 16px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, var(--gray-100) 0%, var(--white) 100%);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        header {
            background: var(--white);
            box-shadow: var(--shadow-sm);
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.95);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1.5rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }

        .logo i {
            width: 32px;
            height: 32px;
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--gray-600);
            font-size: 0.875rem;
        }

        .breadcrumb a {
            color: var(--primary);
            text-decoration: none;
            transition: color 0.2s;
        }

        .breadcrumb a:hover {
            color: var(--primary-dark);
        }

        .main-content {
            margin-top: 2rem;
        }

        .use-case-header {
            background: var(--white);
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-md);
            margin-bottom: 2rem;
        }

        .use-case-title {
            display: flex;
            align-items: start;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .use-case-id {
            background: var(--primary);
            color: var(--white);
            padding: 0.5rem 1rem;
            border-radius: var(--radius-sm);
            font-weight: 600;
            font-size: 0.875rem;
            flex-shrink: 0;
        }

        .use-case-name {
            font-size: 2rem;
            font-weight: 700;
            color: var(--dark);
            flex: 1;
        }

        .project-info {
            display: flex;
            align-items: center;
            gap: 2rem;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--gray-200);
        }

        .info-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--gray-600);
            font-size: 0.875rem;
        }

        .info-item i {
            width: 16px;
            height: 16px;
            color: var(--gray-500);
        }

        .tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 2rem;
            background: var(--white);
            padding: 0.5rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow-sm);
        }

        .tab-button {
            padding: 0.75rem 1.5rem;
            border: none;
            background: transparent;
            color: var(--gray-600);
            font-size: 0.875rem;
            font-weight: 500;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tab-button:hover {
            background: var(--gray-100);
        }

        .tab-button.active {
            background: var(--primary);
            color: var(--white);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .card {
            background: var(--white);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            box-shadow: var(--shadow-md);
            margin-bottom: 1.5rem;
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--gray-200);
        }

        .card-header i {
            width: 24px;
            height: 24px;
            color: var(--primary);
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--dark);
        }

        .accordion {
            border: 1px solid var(--gray-200);
            border-radius: var(--radius);
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .accordion-header {
            background: var(--gray-100);
            padding: 1rem 1.5rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.2s;
        }

        .accordion-header:hover {
            background: var(--gray-200);
        }

        .accordion-header.active {
            background: var(--primary);
            color: var(--white);
        }

        .accordion-title {
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .accordion-icon {
            transition: transform 0.3s;
        }

        .accordion-header.active .accordion-icon {
            transform: rotate(180deg);
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            background: var(--white);
        }

        .accordion-content.active {
            max-height: 500px;
            transition: max-height 0.5s ease-in;
        }

        .accordion-body {
            padding: 1.5rem;
        }

        .flow-list {
            list-style: none;
            counter-reset: flow-counter;
        }

        .flow-list li {
            counter-increment: flow-counter;
            position: relative;
            padding-left: 2.5rem;
            margin-bottom: 1rem;
            line-height: 1.6;
        }

        .flow-list li::before {
            content: counter(flow-counter);
            position: absolute;
            left: 0;
            top: 0;
            width: 28px;
            height: 28px;
            background: var(--primary);
            color: var(--white);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .tag {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.25rem 0.75rem;
            background: var(--gray-100);
            color: var(--gray-700);
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .tag.primary {
            background: rgba(0, 122, 255, 0.1);
            color: var(--primary);
        }

        .tag.success {
            background: rgba(52, 199, 89, 0.1);
            color: var(--success);
        }

        .tag.warning {
            background: rgba(255, 149, 0, 0.1);
            color: var(--warning);
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid var(--gray-200);
        }

        .nav-button {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            background: var(--white);
            color: var(--primary);
            text-decoration: none;
            border-radius: var(--radius);
            border: 2px solid var(--primary);
            font-weight: 500;
            transition: all 0.2s;
        }

        .nav-button:hover {
            background: var(--primary);
            color: var(--white);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .nav-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .nav-button:disabled:hover {
            transform: none;
            background: var(--white);
            color: var(--primary);
        }

        .page-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--gray-600);
            font-size: 0.875rem;
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .header-content {
                padding: 1rem;
                flex-direction: column;
                gap: 1rem;
            }

            .use-case-title {
                flex-direction: column;
            }

            .use-case-name {
                font-size: 1.5rem;
            }

            .project-info {
                flex-direction: column;
                gap: 0.5rem;
                align-items: start;
            }

            .tabs {
                overflow-x: auto;
            }

            .navigation {
                flex-direction: column;
                gap: 1rem;
            }

            .nav-button {
                width: 100%;
                justify-content: center;
            }
        }

        @media print {
            body {
                background: var(--white);
            }

            header,
            .navigation,
            .tabs {
                display: none;
            }

            .container {
                padding: 0;
                max-width: 100%;
            }

            .card {
                box-shadow: none;
                border: 1px solid var(--gray-300);
                break-inside: avoid;
            }

            .accordion-content {
                max-height: none !important;
            }

            .accordion-header {
                background: var(--gray-100) !important;
                color: var(--dark) !important;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo">
                <i data-lucide="cpu"></i>
                AICOE
            </div>
            <div class="breadcrumb">
                <a href="index.html">
                    <i data-lucide="home" style="width: 16px; height: 16px;"></i>
                    Home
                </a>
                <span>/</span>
                <span>Use Cases</span>
                <span>/</span>
                <span>UC-005</span>
            </div>
        </div>
    </header>

    <div class="container">
        <main class="main-content">
            <div class="use-case-header">
                <div class="use-case-title">
                    <span class="use-case-id">UC-005</span>
                    <h1 class="use-case-name">Subscribe to Premium Plan</h1>
                </div>
                <p style="color: var(--gray-600); margin-bottom: 1rem;">
                    A user upgrades from the free tier of the app to a premium subscription to unlock advanced features, contributing to the app's revenue stream.
                </p>
                <div class="project-info">
                    <div class="info-item">
                        <i data-lucide="folder"></i>
                        <span>Fitness Tracking App</span>
                    </div>
                    <div class="info-item">
                        <i data-lucide="file-text"></i>
                        <span>Use Case 5 of 5</span>
                    </div>
                    <div class="info-item">
                        <i data-lucide="flag"></i>
                        <span>Priority: Medium</span>
                    </div>
                </div>
            </div>

            <div class="tabs">
                <button class="tab-button active" onclick="switchTab('overview')">
                    <i data-lucide="eye" style="width: 16px; height: 16px;"></i>
                    Overview
                </button>
                <button class="tab-button" onclick="switchTab('flows')">
                    <i data-lucide="git-branch" style="width: 16px; height: 16px;"></i>
                    Flows
                </button>
                <button class="tab-button" onclick="switchTab('details')">
                    <i data-lucide="info" style="width: 16px; height: 16px;"></i>
                    Details
                </button>
            </div>

            <div id="overview" class="tab-content active">
                <div class="card">
                    <div class="card-header">
                        <i data-lucide="users"></i>
                        <h2 class="card-title">Actors</h2>
                    </div>
                    <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                        <span class="tag primary">
                            <i data-lucide="user" style="width: 14px; height: 14px;"></i>
                            Registered User
                        </span>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <i data-lucide="check-circle"></i>
                        <h2 class="card-title">Preconditions</h2>
                    </div>
                    <ul class="flow-list">
                        <li>User is logged into the app.</li>
                        <li>User is currently on the free plan.</li>
                    </ul>
                </div>

                <div class="card">
                    <div class="card-header">
                        <i data-lucide="target"></i>
                        <h2 class="card-title">Postconditions</h2>
                    </div>
                    <ul class="flow-list">
                        <li>User's account is upgraded to a Premium subscription.</li>
                        <li>All premium features are accessible to the user.</li>
                        <li>The app's revenue is generated.</li>
                    </ul>
                </div>

                <div class="card">
                    <div class="card-header">
                        <i data-lucide="trending-up"></i>
                        <h2 class="card-title">Business Value</h2>
                    </div>
                    <p style="color: var(--gray-700); line-height: 1.8;">
                        This use case is fundamental to the business model. The freemium strategy is an industry best practice, and this flow must be seamless to ensure conversion. The features unlocked are directly tied to competitor insights, showing a clear willingness to pay for such value.
                    </p>
                </div>
            </div>

            <div id="flows" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <i data-lucide="play-circle"></i>
                        <h2 class="card-title">Main Flow</h2>
                    </div>
                    <ul class="flow-list">
                        <li>User encounters a 'Premium' gate, either by tapping on a premium feature, a banner in the app, or navigating to the 'Settings' > 'Subscription' page.</li>
                        <li>The app displays the subscription offer screen, detailing the benefits of Premium: 'All Workout Plans', 'Personalized Plan Builder', 'Advanced Analytics', 'Exclusive Content'.</li>
                        <li>The pricing options are presented: '$9.99/month' and '$79.99/year (Save 33%)'.</li>
                        <li>User selects their preferred subscription cycle (e.g., 'Yearly').</li>
                        <li>The app presents the native platform's in-app purchase confirmation (Apple App Store / Google Play Store).</li>
                        <li>User confirms the purchase using their linked payment method (Face ID, Touch ID, password).</li>
                        <li>The app processes the payment via the app store's billing system.</li>
                        <li>Upon successful payment, the user's account status is updated to 'Premium'.</li>
                        <li>A confirmation screen is shown, and all premium features are immediately unlocked within the app.</li>
                    </ul>
                </div>

                <div class="card">
                    <div class="card-header">
                        <i data-lucide="git-branch"></i>
                        <h2 class="card-title">Alternate Flows</h2>
                    </div>
                    
                    <div class="accordion">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <div class="accordion-title">
                                <i data-lucide="refresh-cw" style="width: 20px; height: 20px;"></i>
                                Restore Purchases
                            </div>
                            <i data-lucide="chevron-down" class="accordion-icon" style="width: 20px; height: 20px;"></i>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-body">
                                <p style="color: var(--gray-700); margin-bottom: 1rem;">
                                    If a user changes devices or reinstalls the app, they can tap a 'Restore Purchases' link on the subscription screen. The app verifies their subscription status with the app store and re-enables premium access without requiring a new purchase.
                                </p>
                                <div style="display: flex; gap: 0.5rem;">
                                    <span class="tag success">
                                        <i data-lucide="smartphone" style="width: 14px; height: 14px;"></i>
                                        Cross-device
                                    </span>
                                    <span class="tag primary">
                                        <i data-lucide="shield-check" style="width: 14px; height: 14px;"></i>
                                        Secure
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="accordion">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <div class="accordion-title">
                                <i data-lucide="alert-circle" style="width: 20px; height: 20px;"></i>
                                Payment Failure
                            </div>
                            <i data-lucide="chevron-down" class="accordion-icon" style="width: 20px; height: 20px;"></i>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-body">
                                <p style="color: var(--gray-700); margin-bottom: 1rem;">
                                    If the payment is declined, the native app store interface displays an error message. The user is returned to the subscription screen to try again or update their payment information.
                                </p>
                                <div style="display: flex; gap: 0.5rem;">
                                    <span class="tag warning">
                                        <i data-lucide="credit-card" style="width: 14px; height: 14px;"></i>
                                        Payment Issue
                                    </span>
                                    <span class="tag primary">
                                        <i data-lucide="repeat" style="width: 14px; height: 14px;"></i>
                                        Retry Option
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="details" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <i data-lucide="settings"></i>
                        <h2 class="card-title">Technical Requirements</h2>
                    </div>
                    <div style="display: grid; gap: 1rem;">
                        <div style="padding: 1rem; background: var(--gray-100); border-radius: var(--radius-sm);">
                            <h4 style="font-weight: 600; margin-bottom: 0.5rem; color: var(--dark);">Payment Integration</h4>
                            <p style="color: var(--gray-600); font-size: 0.875rem;">
                                Native in-app purchase APIs for both iOS (StoreKit) and Android (Google Play Billing)
                            </p>
                        </div>
                        <div style="padding: 1rem; background: var(--gray-100); border-radius: var(--radius-sm);">
                            <h4 style="font-weight: 600; margin-bottom: 0.5rem; color: var(--dark);">Subscription Management</h4>
                            <p style="color: var(--gray-600); font-size: 0.875rem;">
                                Server-side validation and status synchronization with app store receipts
                            </p>
                        </div>
                        <div style="padding: 1rem; background: var(--gray-100); border-radius: var(--radius-sm);">
                            <h4 style="font-weight: 600; margin-bottom: 0.5rem; color: var(--dark);">Feature Gating</h4>
                            <p style="color: var(--gray-600); font-size: 0.875rem;">
                                Dynamic feature unlock based on subscription status with offline support
                            </p>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <i data-lucide="shield"></i>
                        <h2 class="card-title">Security Considerations</h2>
                    </div>
                    <ul class="flow-list">
                        <li>Secure receipt validation to prevent unauthorized premium access</li>
                        <li>Encrypted communication with payment providers</li>
                        <li>Compliance with PCI DSS requirements for payment processing</li>
                        <li>User data protection in accordance with GDPR and CCPA</li>
                    </ul>
                </div>

                <div class="card">
                    <div class="card-header">
                        <i data-lucide="bar-chart-2"></i>
                        <h2 class="card-title">Success Metrics</h2>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                        <div style="text-align: center; padding: 1rem; background: var(--gray-100); border-radius: var(--radius-sm);">
                            <div style="font-size: 1.5rem; font-weight: 700; color: var(--primary);">15%</div>
                            <div style="font-size: 0.875rem; color: var(--gray-600);">Conversion Rate Target</div>
                        </div>
                        <div style="text-align: center; padding: 1rem; background: var(--gray-100); border-radius: var(--radius-sm);">
                            <div style="font-size: 1.5rem; font-weight: 700; color: var(--success);">$9.99</div>
                            <div style="font-size: 0.875rem; color: var(--gray-600);">Monthly Price</div>
                        </div>
                        <div style="text-align: center; padding: 1rem; background: var(--gray-100); border-radius: var(--radius-sm);">
                            <div style="font-size: 1.5rem; font-weight: 700; color: var(--secondary);">33%</div>
                            <div style="font-size: 0.875rem; color: var(--gray-600);">Annual Savings</div>
                        </div>
                    </div>
                </div>
            </div>

            <nav class="navigation">
                <a href="use-case-4.html" class="nav-button">
                    <i data-lucide="chevron-left" style="width: 20px; height: 20px;"></i>
                    Previous
                </a>
                <div class="page-indicator">
                    <span>Page 5 of 5</span>
                </div>
                <button class="nav-button" disabled>
                    Next
                    <i data-lucide="chevron-right" style="width: 20px; height: 20px;"></i>
                </button>
            </nav>
        </main>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // Tab switching functionality
        function switchTab(tabName) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => {
                content.classList.remove('active');
            });

            // Remove active class from all tab buttons
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(button => {
                button.classList.remove('active');
            });

            // Show selected tab content
            document.getElementById(tabName).classList.add('active');

            // Add active class to clicked button
            event.target.closest('.tab-button').classList.add('active');

            // Reinitialize icons for the newly shown content
            setTimeout(() => {
                lucide.createIcons();
            }, 100);
        }

        // Accordion functionality
        function toggleAccordion(header) {
            const content = header.nextElementSibling;
            const allHeaders = document.querySelectorAll('.accordion-header');
            const allContents = document.querySelectorAll('.accordion-content');

            // Close all other accordions
            allHeaders.forEach(h => {
                if (h !== header) {
                    h.classList.remove('active');
                }
            });

            allContents.forEach(c => {
                if (c !== content) {
                    c.classList.remove('active');
                }
            });

            // Toggle current accordion
            header.classList.toggle('active');
            content.classList.toggle('active');

            // Reinitialize icons
            setTimeout(() => {
                lucide.createIcons();
            }, 100);
        }

        // Add smooth scroll behavior
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Add print button functionality (optional enhancement)
        window.addEventListener('beforeprint', () => {
            // Open all accordions before printing
            document.querySelectorAll('.accordion-header').forEach(header => {
                header.classList.add('active');
            });
            document.querySelectorAll('.accordion-content').forEach(content => {
                content.classList.add('active');
            });
        });
    </script>
</body>
</html>